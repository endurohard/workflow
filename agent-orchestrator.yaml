dataDir: ~/.agent-orchestrator
worktreeDir: ~/.worktrees
port: 3001

defaults:
  runtime: tmux
  agent: claude-code
  workspace: worktree
  notifiers:
    - desktop
    - slack  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack

# ====================================
# –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ï –†–ï–ê–ö–¶–ò–ò
# ====================================
reactions:
  # 1. CI —É–ø–∞–ª ‚Üí –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç
  ci-failed:
    auto: true                  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å
    action: send-to-agent       # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∞–≥–µ–Ω—Ç—É
    retries: 3                  # –î–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    escalateAfter: 30m          # –ï—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏–ª –∑–∞ 30 –º–∏–Ω, —É–≤–µ–¥–æ–º–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞

  # 2. –†–µ–≤—å—é–≤–µ—Ä –ø–æ–ø—Ä–æ—Å–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí –ê–≥–µ–Ω—Ç –≤–Ω–æ—Å–∏—Ç –ø—Ä–∞–≤–∫–∏
  changes-requested:
    auto: true
    action: send-to-agent
    retries: 2
    escalateAfter: 1h           # –≠—Å–∫–∞–ª–∞—Ü–∏—è —á–µ—Ä–µ–∑ —á–∞—Å

  # 3. PR –∞–ø—Ä—É–≤–ª–µ–Ω –∏ CI –∑–µ–ª–µ–Ω—ã–π ‚Üí –ê–≤—Ç–æ–º–µ—Ä–∂!
  approved-and-green:
    auto: true                  # –í–ê–ñ–ù–û: –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–µ—Ä–∂
    action: auto-merge          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ—Ä–¥–∂–∏—Ç—å

  # 4. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –º–µ—Ä–¥–∂–µ ‚Üí –ê–≥–µ–Ω—Ç —Ä–∞–∑—Ä–µ—à–∞–µ—Ç
  merge-conflict:
    auto: true
    action: send-to-agent

  # 5. –¢–µ—Å—Ç—ã —É–ø–∞–ª–∏ ‚Üí –ê–≥–µ–Ω—Ç —á–∏–Ω–∏—Ç
  tests-failed:
    auto: true
    action: send-to-agent
    retries: 3

projects:
  workflow:
    repo: endurohard/workflow
    path: /home/it/workflow
    defaultBranch: main

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≥–µ–Ω—Ç–∞ - —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
    agentConfig:
      permissions: skip              # –ù–µ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π!

    # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
    agentRules: |-
      –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
      1. –í—Å–µ–≥–¥–∞ –ø–∏—à–∏ —Ç–µ—Å—Ç—ã –ü–ï–†–ï–î –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞ (TDD)
      2. –ó–∞–ø—É—Å–∫–∞–π —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ push
      3. –ò—Å–ø–æ–ª—å–∑—É–π conventional commits (feat:, fix:, test:, etc.)
      4. –õ–∏–Ω—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
      5. –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –Ω–µ –º–µ–Ω–µ–µ 80%
      6. –ü–∏—à–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
      7. –ï—Å–ª–∏ CI —É–ø–∞–ª - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø—Ä–∞–≤—å –∏ –∑–∞–ø—É—à–∏ —Å–Ω–æ–≤–∞
      8. –ï—Å–ª–∏ review —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ - –æ—Ç—Ä–∞–±–æ—Ç–∞–π –í–°–ï –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
      9. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π - –æ—Ç–≤–µ—á–∞–π –≤ PR —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
      10. –ù–µ —Å–æ–∑–¥–∞–≤–∞–π PR –ø–æ–∫–∞ –≤—Å–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ

    # –•—É–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã - –∞–≥–µ–Ω—Ç —Å–∞–º –≤—ã–ø–æ–ª–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—ã –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SCM (GitHub)
    scm:
      plugin: github
      config:
        autoMerge: true                   # –ê–≤—Ç–æ–º–µ—Ä–∂ –≤–∫–ª—é—á–µ–Ω
        requireReviews: 1                 # –¢—Ä–µ–±—É–µ—Ç—Å—è 1 –∞–ø—Ä—É–≤
        requireCI: true                   # CI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–º
        deleteBranchOnMerge: true         # –£–¥–∞–ª—è—Ç—å –≤–µ—Ç–∫—É –ø–æ—Å–ª–µ –º–µ—Ä–¥–∂–∞

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    ci:
      provider: github-actions
      checkInterval: 30s                  # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫

    # –¢—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á
    tracker:
      plugin: github
      config:
        autoAssign: true                  # –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ issues –Ω–∞ –∞–≥–µ–Ω—Ç–∞
        autoClose: true                   # –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ issue –ø–æ—Å–ª–µ –º–µ—Ä–¥–∂–∞
        labels:
          inProgress: "ü§ñ agent-working"
          completed: "‚úÖ done"
          failed: "‚ùå agent-failed"
