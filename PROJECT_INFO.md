# Информация о проекте

## Название проекта
**Система управления выездным сервисом по ремонту техники**

## Описание
Комплексная веб-платформа для управления сервисной компанией, специализирующейся на выездном ремонте и обслуживании бытовой техники и электроники. Система построена на микросервисной архитектуре с использованием Kong API Gateway.

## Основные возможности

### Для диспетчеров:
- Создание и управление заявками
- Назначение задач техникам
- Планирование расписания
- Отслеживание статусов выполнения
- Просмотр аналитики и отчетов

### Для техников:
- Просмотр назначенных задач
- Обновление статусов работ
- Ведение отчетов о выполненных работах
- Управление своим расписанием
- Получение уведомлений о новых задачах

### Для клиентов:
- Создание заявок на ремонт
- Отслеживание статуса заявки
- Просмотр истории обращений
- Получение уведомлений

### Для администраторов:
- Управление пользователями
- Настройка системы
- Просмотр полной аналитики
- Управление правами доступа

## Технологический стек

### Backend
- **Node.js** 18.x
- **Express.js** - веб-фреймворк
- **TypeScript** - типизированный JavaScript
- **PostgreSQL** - основная база данных
- **Redis** - кеширование и real-time

### Frontend
- **React** 18.x
- **TypeScript**
- **Vite** - сборщик и dev-сервер
- **React Router** - маршрутизация
- **TanStack Query** - управление состоянием API

### Infrastructure
- **Kong API Gateway** - точка входа для всех API запросов
- **Docker** - контейнеризация
- **Docker Compose** - оркестрация контейнеров
- **Nginx** - веб-сервер для фронтенда

### Безопасность
- **JWT** - аутентификация
- **bcrypt** - хеширование паролей
- **Helmet.js** - безопасность HTTP заголовков
- **CORS** - контроль доступа

## Структура проекта

```
workflow/
├── services/              # Микросервисы
│   ├── auth/             # Сервис аутентификации
│   ├── users/            # Сервис пользователей
│   ├── tasks/            # Сервис задач
│   ├── schedule/         # Сервис расписания
│   ├── notifications/    # Сервис уведомлений
│   └── reports/          # Сервис отчетов
├── frontend/             # React приложение
├── database/             # SQL скрипты
│   └── init/            # Инициализация БД
├── kong.yaml            # Конфигурация Kong
├── docker-compose.yml   # Docker Compose конфигурация
├── Makefile             # Команды для управления проектом
├── README.md            # Основная документация
├── QUICKSTART.md        # Быстрый старт
└── ARCHITECTURE.md      # Архитектура системы
```

## Микросервисы

1. **Auth Service** (порт 3001)
   - Регистрация и авторизация
   - Управление JWT токенами
   - Восстановление паролей

2. **Users Service** (порт 3002)
   - Управление пользователями
   - Профили техников
   - Данные клиентов

3. **Tasks Service** (порт 3003)
   - Управление заявками
   - Назначение задач
   - Отслеживание статусов

4. **Schedule Service** (порт 3004)
   - Расписание техников
   - Календарь задач
   - Проверка доступности

5. **Notifications Service** (порт 3005)
   - Push уведомления
   - Email уведомления
   - Управление подписками

6. **Reports Service** (порт 3006)
   - Генерация отчетов
   - Аналитика
   - Метрики производительности

## База данных

### Основные таблицы:
- `users` - пользователи системы
- `technicians` - техники
- `clients` - клиенты
- `orders` - заявки
- `tasks` - задачи
- `schedules` - расписание
- `notifications` - уведомления
- `task_comments` - комментарии
- `order_status_history` - история статусов
- `reports` - отчеты о работах

## API Endpoints

### Публичные (без аутентификации):
- `POST /api/auth/register` - регистрация
- `POST /api/auth/login` - вход
- `POST /api/auth/forgot-password` - восстановление пароля

### Защищенные (требуют JWT):
- `/api/users/*` - управление пользователями
- `/api/tasks/*` - управление задачами
- `/api/orders/*` - управление заявками
- `/api/schedule/*` - расписание
- `/api/notifications/*` - уведомления
- `/api/reports/*` - отчеты

## Порты

- **3000** - Frontend (React)
- **8000** - Kong Proxy (API Gateway)
- **8001** - Kong Admin API
- **3001** - Auth Service
- **3002** - Users Service
- **3003** - Tasks Service
- **3004** - Schedule Service
- **3005** - Notifications Service
- **3006** - Reports Service
- **5432** - PostgreSQL
- **6379** - Redis

## Быстрый запуск

```bash
# Сборка образов
make build

# Запуск всех сервисов
make up

# Проверка статуса
make ps

# Просмотр логов
make logs

# Остановка
make down
```

Подробная инструкция в файле [QUICKSTART.md](QUICKSTART.md)

## Тестовые данные

После первого запуска в БД создаются тестовые пользователи:
- admin@example.com / password123
- dispatcher@example.com / password123
- tech1@example.com / password123
- client1@example.com / password123

## Разработка

### Backend сервис:
```bash
cd services/auth
npm install
npm run dev
```

### Frontend:
```bash
cd frontend
npm install
npm run dev
```

## Дополнительная документация

- [README.md](README.md) - полная документация
- [QUICKSTART.md](QUICKSTART.md) - быстрый старт
- [ARCHITECTURE.md](ARCHITECTURE.md) - архитектура системы

## Статус проекта

✅ Микросервисная архитектура настроена
✅ Kong API Gateway сконфигурирован
✅ База данных PostgreSQL + Redis
✅ 6 микросервисов (Auth, Users, Tasks, Schedule, Notifications, Reports)
✅ Frontend на React + TypeScript + Vite
✅ Docker контейнеризация
✅ Полная документация

## Лицензия

MIT License

## Автор

Создано с использованием Claude Code
